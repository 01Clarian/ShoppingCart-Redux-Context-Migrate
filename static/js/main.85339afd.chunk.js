(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(t){t.exports=[{id:1,title:"iPad 4 Mini",price:500.01,inventory:2},{id:2,title:"H&M T-Shirt White",price:10.99,inventory:10},{id:3,title:"Charli XCX - Sucker CD",price:19.99,inventory:5}]},20:function(t,e,n){t.exports=n(31)},31:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),u=n(8),a=n(1),i=n(5),o=(n(29),n(17)),d=n(2),l=n(4),s=n(19),p={addedIds:[],quantityById:{}},f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.addedIds,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_TO_CART":return-1!==t.indexOf(e.productId)?t:[].concat(Object(s.a)(t),[e.productId]);default:return t}},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.quantityById,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_TO_CART":var n=e.productId;return Object(d.a)({},t,Object(l.a)({},n,(t[n]||0)+1));default:return t}},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CHECKOUT_REQUEST":return p;case"CHECKOUT_FAILURE":return e.cart;default:return{addedIds:f(t.addedIds,e),quantityById:v(t.quantityById,e)}}},y=Object(a.c)({byId:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"RECEIVE_PRODUCTS":return Object(d.a)({},t,e.products.reduce(function(t,e){return t[e.id]=e,t},{}));default:var n=e.productId;return n?Object(d.a)({},t,Object(l.a)({},n,function(t,e){switch(e.type){case"ADD_TO_CART":return Object(d.a)({},t,{inventory:t.inventory-1});default:return t}}(t[n],e))):t}},visibleIds:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"RECEIVE_PRODUCTS":return e.products.map(function(t){return t.id});default:return t}}}),m=function(t,e){return t.byId[e]},b=Object(a.c)({cart:E,products:y}),h=function(t){return function(t){return t.addedIds}(t.cart)},C=function(t,e){return function(t,e){return t.quantityById[e]||0}(t.cart,e)},O=function(t,e){return m(t.products,e)},T=function(t){return h(t).reduce(function(e,n){return e+O(t,n).price*C(t,n)},0).toFixed(2)},I=function(t){return h(t).map(function(e){return Object(d.a)({},O(t,e),{quantity:C(t,e)})})},j=n(6),g=n.n(j),k=n(9),w=n(18),_={getProducts:function(){var t=Object(k.a)(g.a.mark(function t(){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,e){return setTimeout(function(){return t(w)},e||100)}));case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),buyProducts:function(t,e,n){return setTimeout(function(){return e()},n||100)}},S=function(t){var e=t.price,n=t.quantity,r=t.title;return c.a.createElement("div",null,r," - $",e,n?" x ".concat(n):null)},P=function(t){var e=t.product,n=t.onAddToCartClicked;return c.a.createElement("div",{style:{marginBottom:20}},c.a.createElement(S,{title:e.title,price:e.price,quantity:e.inventory}),c.a.createElement("button",{onClick:n,disabled:e.inventory>0?"":"disabled"},e.inventory>0?"Add to cart":"Sold Out"))},R=function(t){var e=t.title,n=t.children;return c.a.createElement("div",null,c.a.createElement("h3",null,e),c.a.createElement("div",null,n))},A=n(14),D=Object(r.createContext)({test:"",products:[]}),x=function(t){var e=t.children,n=Object(r.useState)("the products provider has been successfully connected :)"),u=Object(A.a)(n,1)[0],a=Object(r.useState)([]),i=Object(A.a)(a,2),o=i[0],d=i[1];return Object(r.useEffect)(Object(k.a)(g.a.mark(function t(){var e;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.getProducts(function(t){return t});case 2:e=t.sent,d(e);case 4:case"end":return t.stop()}},t)})),[]),c.a.createElement(D.Provider,{value:{test:u,products:o}},e)},U=Object(i.b)(null,{addToCart:function(t){return function(e,n){n().products.byId[t].inventory>0&&e(function(t){return{type:"ADD_TO_CART",productId:t}}(t))}}})(function(t){var e=t.addToCart,n=Object(r.useContext)(D),u=n.test,a=n.products;return console.log(u),c.a.createElement(R,{title:"Products"},a.map(function(t){return c.a.createElement(P,{key:t.id,product:t,onAddToCartClicked:function(){return e(t.id)}})}))}),q=function(t){var e=t.products,n=t.total,r=t.onCheckoutClicked,u=e.length>0,a=u?e.map(function(t){return c.a.createElement(S,{title:t.title,price:t.price,quantity:t.quantity,key:t.id})}):c.a.createElement("em",null,"Please add some products to cart.");return c.a.createElement("div",null,c.a.createElement("h3",null,"Your Cart"),c.a.createElement("div",null,a),c.a.createElement("p",null,"Total: $",n),c.a.createElement("button",{onClick:r,disabled:u?"":"disabled"},"Checkout"))},B=Object(i.b)(function(t){return{products:I(t),total:T(t)}},{checkout:function(t){return function(e,n){var r=n().cart;e({type:"CHECKOUT_REQUEST"}),_.buyProducts(t,function(){e({type:"CHECKOUT_SUCCESS",cart:r})})}}})(function(t){var e=t.products,n=t.total,r=t.checkout;return c.a.createElement(q,{products:e,total:n,onCheckoutClicked:function(){return r(e)}})}),H=function(){return c.a.createElement("div",null,c.a.createElement("h2",null,"Shopping Cart Example"),c.a.createElement("hr",null),c.a.createElement(U,null),c.a.createElement("hr",null),c.a.createElement(B,null))},K=[o.a];var V=Object(a.d)(b,a.a.apply(void 0,K));V.dispatch(function(t){_.getProducts(function(e){t(function(t){return{type:"RECEIVE_PRODUCTS",products:t}}(e))})}),Object(u.render)(c.a.createElement(x,null,c.a.createElement(i.a,{store:V},c.a.createElement(H,null))),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.85339afd.chunk.js.map